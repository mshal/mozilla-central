include_rules

ifeq (@(MOZ_B2G_BT),1)
DEFINES += -DMOZ_B2G_BT=1
endif

ifeq (@(MOZ_B2G_RIL),1)
DEFINES += -DMOZ_B2G_RIL=1
endif

: event_impl_gen.conf.in |> ^ Preprocessor %f -> %o^ $(PYTHON) $(MOZ_ROOT)/config/Preprocessor.py $(DEFINES) %f > %o |> event_impl_gen.conf

dictionary_gen = $(PYTHON) $(PYTHONPATH)
dictionary_gen += -I$(MOZ_ROOT)/xpcom/idl-parser
dictionary_gen += dictionary_helper_gen.py -I$(MOZ_ROOT)/dist/idl
dictionary_gen += --header-output DictionaryHelpers.h
dictionary_gen += --stub-output DictionaryHelpers.cpp
dictionary_gen += --cachedir=$(MOZ_ROOT)/dist/idl
dictionary_gen += dictionary_helper_gen.conf
dictionary_gen += event_impl_gen.conf
: dictionary_helper_gen.conf event_impl_gen.conf | $(MOZ_ROOT)/dist/idl/<installed-idls> |> ^ dictionary_helper_gen.py -> %o^ $(dictionary_gen) %f |> DictionaryHelpers.h DictionaryHelpers.cpp

event_impl_gen = $(PYTHON) $(PYTHONPATH)
event_impl_gen += -I$(MOZ_ROOT)/xpcom/idl-parser
event_impl_gen += event_impl_gen.py
event_impl_gen += --cachedir=$(MOZ_ROOT)/dist/idl
: event_impl_gen.conf | $(MOZ_ROOT)/dist/idl/<installed-idls> |> ^ event_impl_gen.py -> %o^ $(event_impl_gen) --header-output %o %f |> GeneratedEvents.h
