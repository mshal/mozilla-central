# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this file,
# You can obtain one at http://mozilla.org/MPL/2.0/.

include_rules

# Process all of the idl files in dist/idl so we can generate headers.
: foreach ../idl/*.idl | ../idl/<installed-idls> |> ^ python header.py [%f -> %o]^ $(PYHEADER) -I../idl %f -o %o --cachedir=../idl |> %B.h

# List of directories that contain EXPORTS
EXPORT_DIRS += $(MOZ_ROOT)/dom/audiochannel
EXPORT_DIRS += $(MOZ_ROOT)/dom/base
EXPORT_DIRS += $(MOZ_ROOT)/dom/browser-element
EXPORT_DIRS += $(MOZ_ROOT)/dom/camera
EXPORT_DIRS += $(MOZ_ROOT)/dom/devicestorage
EXPORT_DIRS += $(MOZ_ROOT)/dom/file
EXPORT_DIRS += $(MOZ_ROOT)/dom/interfaces/storage
EXPORT_DIRS += $(MOZ_ROOT)/dom/ipc
EXPORT_DIRS += $(MOZ_ROOT)/dom/plugins/base/android
EXPORT_DIRS += $(MOZ_ROOT)/dom/plugins/base
EXPORT_DIRS += $(MOZ_ROOT)/dom/src/geolocation
EXPORT_DIRS += $(MOZ_ROOT)/dom/src/json
EXPORT_DIRS += $(MOZ_ROOT)/dom/src/jsurl
EXPORT_DIRS += $(MOZ_ROOT)/dom/system/gonk
EXPORT_DIRS += $(MOZ_ROOT)/dom/system

run python -B $(MOZ_ROOT)/build/pymake/tup_export.py EXPORTS $(MOZ_ROOT) $(EXPORT_DIRS)
